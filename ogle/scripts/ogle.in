#!/bin/sh

create_pipe() { 
    if [ ! -p $1 ]; then
	rm -f $1;
        # So any other user can start the program / rm the pipes
        mkfifo -m 666 $1;
    fi
    # chgrp dvd $1;
}

create_pipe "/tmp/ac3"
create_pipe "/tmp/audio"

# This is were all the helper programs are placed
prefix=@prefix@
exec_prefix=@exec_prefix@
DVDP_ROOT=@libdir@/@PACKAGE@

export DVDP_ROOT
DVDP_CTRL=$DVDP_ROOT/ogle_ctrl
export DVDP_CTRL
DVDP_DEMUX=$DVDP_ROOT/ogle_mpeg_ps
export DVDP_DEMUX
DVDP_CLI_UI=$DVDP_ROOT/ogle_cli
export DVDP_CLI_UI
if [ -x $DVDP_ROOT/ogle_gui ]; then
DVDP_UI=$DVDP_ROOT/ogle_gui
else
DVDP_UI=$exec_prefix/bin/ogle_gui
fi
export DVDP_UI
#DVDP_AC3=$DVDP_ROOT/ogle_ac3_p
DVDP_AC3=$DVDP_ROOT/ogle_a52
export DVDP_AC3
#DVDP_MPEGAUDIO=$DVDP_ROOT/mpg123_wrap
#export DVDP_MPEGAUDIO
DVDP_VIDEO=$DVDP_ROOT/ogle_mpeg_vs
export DVDP_VIDEO
DVDP_VMG=$DVDP_ROOT/ogle_nav
#DVDP_VMG=RUNNING
export DVDP_VMG
#DVDP_SPU=$DVDP_ROOT/subpicture/spu_wrap
DVDP_SPU=$DVDP_ROOT/ogle_vout
export DVDP_SPU
DVDP_VIDEO_OUT=$DVDP_ROOT/ogle_vout
export DVDP_VIDEO_OUT
if [ -x "$DVDP_UI" ]; then
  $DVDP_CTRL -u gui $*;
else
  $DVDP_CTRL -u cli $*;
fi;
